<section class="h-100 h-custom pb-0"
	style="color: var(- -color-primary)">
	<div class="container p-0 pb-0 h-100">
		<div class="pagetitle text">
			<nav>
				<ol class="breadcrumb mt-1 mb-1">
					<li class="breadcrumb-item"><a href="#home">Smart Book</a></li>
					<li class="breadcrumb-item active">Giỏ hàng</li>
				</ol>
			</nav>
		</div>
		<div class="row d-flex justify-content-center align-items-center h-100">
			<div class="col-12">
				<div class="card card-registration card-registration-2">
					<div class="card-body p-0">
						<div class="row g-0">
							<div class="col-lg-8" style="min-height: 700px">
								<div class="p-3">
									<div class="d-flex align-items-center">
										<h3 class="fw-bold m-0 fs-3 text">
											<img src="/index/img/cart.png" width="35px"
												class="m-0 p-0 mb-2" alt=""> GIỎ HÀNG
										</h3>
										&ensp;
										<h6 class="mb-0 text-muted text">({{carts.length}} sản phẩm)</h6>
									</div>
									<hr class="mt-2 mb-2">
									<div class="header-cart fw-bold">
										<div class="row">
											<div class="col-6">
												<input class="form-check-input" type="checkbox" ng-model="chkAll" ng-change="chkAllFunc()">&ensp;Chọn tất cả <span class="small">({{carts.length}} sản phẩm)</span>
											</div>
											<div class="col-2">Số lượng</div>
											<div class="col-3 text-center">Thành tiền</div>
											<div class="col-1"></div>
										</div>
									</div>
									<hr class="mt-2 mb-2">
									<div ng-repeat="cart in carts track by $index">
										<div
											class="row d-flex justify-content-between align-items-center">
											<div class="col-1">
												<input ng-change="selectInput()" class="form-check-input" ng-checked="chkAll==true" type="checkbox" ng-model="selectBook" name="book" ng-value={{$index}}>
											</div>
											<div class="col-1">
												<a href="#book/{{cart.book.id}}"><img src="data:image/jpg;base64,{{cart.book.image}}" class="img-fluid rounded-3"></a>
											</div>
											<div class="col-4">
												<a href="#book/{{cart.book.id}}"><h6 class="text-black mb-0">{{cart.book.name}}</h6></a>
											</div>
											<div class="col-2 d-flex">
												<input id="{{'input'+$index}}" min="0" name="quantity"
													ng-keyup="changeAmount($index)" ng-model="amount"
													ng-value="cart.amount" type="text"
													class="form-control form-control-sm" />
											</div>
											<div class="col-3 text-center">
												<h6 class="mb-0">{{convertText((cart.book.price*(100-cart.book.discount)/100)*cart.amount)}}</h6>
											</div>
											<div class="col-1 text-end">
												<button ng-click="deleteCart($index)"
													class="btn btn-out-line-dark text-muted">
													<i class="fas fa-times text-light"></i>
												</button>
											</div>
										</div>
										<hr class="mt-2 mb-2">
									</div>

								</div>
							</div>
							<div class="col-lg-4 bg-grey">
								<div class="p-3">
									<h3 class="fw-bold m-0 fs-5">
										<i class="fa-sharp fa-solid fa-ticket text"></i>&ensp;<span class="text">Ưu đãi giảm giá</span>
									</h3>
									<hr class="mt-2 mb-2">
									<div style="min-height: 400px">
										<div class="mt-3 mb-3">
											<h6 class="mb-0">GIẢM 120K ĐƠN TRÊN 1200K</h6>
											<span class="small">Với mỗi đơn hàng trên 1.200.000đ sẽ được giảm ngay 120.000đ</span><br>
											<div class="rounded-pill m-0 mt-1 p-0 row" style="height: 10px; background-color: #D3D3D3;">
												<div class="{{getCol(1200000)}} rounded-pill" id="120k" style="height: 10px; background-color: var(--color-main); z-index: 999"></div>
											</div>
											<div class="d-flex mt-1 justify-content-between" ng-show="getLack(1200000)>0">
												<span class="small text-danger">Cần thêm {{convertText(getLack(1200000))}}</span>
												<a class="small text-primary" href="#home">Mua thêm</a>
											</div>
											<div class="d-flex mt-1 justify-content-between" ng-show="getLack(1200000)<=0 && getLack(1200000)>-1200000">
												<span class="small text-success">Đã áp dụng</span>
											</div>
											<div class="d-flex mt-1 justify-content-between" ng-show="getLack(1200000)<=-1200000">
												<span class="small text-dark"><del>Đã áp dụng</del></span>
											</div>
										</div>
										<hr class="mt-3 mb-3" style="color: #A9A9A9">
										<div class="mt-3 mb-3">
											<h6 class="mb-0">GIẢM 300K ĐƠN TRÊN 2400K</h6>
											<span class="small">Với mỗi đơn hàng trên 2.400.000đ sẽ được giảm ngay 300.000đ</span><br>
											<div class="rounded-pill m-0 mt-1 p-0 row" style="height: 10px; background-color: #D3D3D3;">
												<div class="{{getCol(2400000)}} rounded-pill" id="240k" style="height: 10px; background-color: var(--color-main); z-index: 999"></div>
											</div>
											<div class="d-flex mt-1 justify-content-between" ng-show="getLack(2400000)>0">
												<span class="small text-danger">Cần thêm {{convertText(getLack(2400000))}}</span>
												<a class="small text-primary" href="#home">Mua thêm</a>
											</div>
											<div class="d-flex mt-1 justify-content-between" ng-show="getLack(2400000)<=0 && getLack(2400000)>-1200000">
												<span class="small text-success">Đã áp dụng</span>
											</div>
											<div class="d-flex mt-1 justify-content-between" ng-show="getLack(2400000)<=-1200000">
												<span class="small text-dark"><del>Đã áp dụng</del></span>
											</div>
										</div>
										<hr class="mt-3 mb-3" style="color: #A9A9A9">
										<div class="mt-3 mb-3">
											<h6 class="mb-0">GIẢM 500K ĐƠN TRÊN 3600K</h6>
											<span class="small">Với mỗi đơn hàng trên 3.600.000đ sẽ được giảm ngay 500.000đ</span><br>
											<div class="rounded-pill m-0 mt-1 p-0 row" style="height: 10px; background-color: #D3D3D3;">
												<div class="{{getCol(3600000)}} rounded-pill" id="360k" style="height: 10px; background-color: var(--color-main); z-index: 999"></div>
											</div>
											<div class="d-flex mt-1 justify-content-between" ng-show="getLack(3600000)>0">
												<span class="small text-danger">Cần thêm {{convertText(getLack(3600000))}}</span>
												<a class="small text-primary" href="#home">Mua thêm</a>
											</div>
											<div class="d-flex mt-1 justify-content-between" ng-show="getLack(3600000)<=0">
												<span class="small text-success">Đã áp dụng</span>
											</div>
										</div>
									</div>
									<hr class="my-2">
									<div class="d-flex justify-content-between">
										<h6>Tổng sản phẩm</h6>
										<h6>{{items +' sản phẩm' }}</h6>
									</div>
									<div class="d-flex justify-content-between">
										<h6>Tổng tiền sản phẩm</h6>
										<h6>{{convertText(total)}}</h6>
									</div>
									<div class="d-flex justify-content-between">
										<h6>Giảm giá</h6>
										<h6>{{convertText(getReduced())}}</h6>
									</div>
									<div class="d-flex justify-content-between mb-5">
										<h5 class="text-uppercase">Tạm tính</h5>
										<h5 ng-show="total>0">{{convertText(getTotal())}}</h5>
										<h5 ng-show="total==0">0</h5>
									</div>

									<button type="button" class="btn btn-dark btn-block btn-lg bg"
										data-mdb-ripple-color="dark" ng-click="beforePay()">Đặt hàng</button>

								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="modal fade" id="confirmModal" tabindex="-1"
			aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLabel">Xác nhận thanh
							toán</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal"
							aria-label="Close"></button>
					</div>
					<div class="modal-body">Bạn có chắn muốn mua các sách đã
						chọn?</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary"
							data-bs-dismiss="modal">Không</button>
						<button type="button" class="btn btn-primary"
							data-bs-dismiss="modal" ng-click="pay()">Chắc chắn</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
